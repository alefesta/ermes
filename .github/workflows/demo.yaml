name: ⭐️ Demo Action ⭐️

on: push

# concurrency:
#   group: ci-tests-${{ github.ref }}-1
#   # New commit on branch cancels running workflows of the same branch
#   cancel-in-progress: true

jobs:
   
   issue-setup:
      name: setup
      if: github.actor == 'alefesta'
      uses: ./.github/workflows/issue-setup.yml

   prepare-environment:
      name: prepare environment
      needs: issue-setup
      runs-on: ubuntu-latest
      steps:
         - name: prepare
           if: github.actor != 'alefesta'
           uses: ./.github/workflows/issue-setup.yml

   evaluate-code:
      name: evaluate code to be run
      needs: prepare-environment
      runs-on: ubuntu-latest
      steps:
         - name: evaluate
           if: needs.prepare-environment.result == 'skipped'
           uses: ./.github/workflows/issue-setup.yml
         - name: catch-error
           if: needs.prepare-environment.result == 'failure'
           uses: ./.github/workflows/issue-setup.yml
   
   execute-code:
      name: execute code
      needs: [prepare-environment,evaluate-code]
      runs-on: ubuntu-latest
      steps:
         - name: execute
           if: needs.evaluate-code.result == 'skipped'
           uses: ./.github/workflows/issue-setup.yml
         - name: catch-error
           if: needs.evaluate-code.result == 'failure'
           uses: ./.github/workflows/issue-setup.yml
   
   # catch-errors:
   #    name: catch errors
   #    # needs: [prepare-environment,execute-code]
   #    if: needs.prepare-environment.result=='failure' || needs.execute-code.result == 'failure'
   #    uses: ./.github/workflows/issue-setup.yml
   




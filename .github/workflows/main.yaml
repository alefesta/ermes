name: Main

on:
  issues:
    types: [opened]
env:
  branc_name: ${{github.actor}}
jobs:
  Set-Up-Actions:
    runs-on: ubuntu-latest
    # container: docker.io/hello-world
    steps:
      - name: Commit files # transfer the new html files back into the repository
        uses: actions/checkout@v2
        with:
          token: ${{ secrets.GH_WORKFLOW }}
      - run: |
          git config user.name github-actions
          git config user.email github-actions@github.com
          git checkout -b ${{github.actor}}
          cd .github/workflows && curl -O https://raw.githubusercontent.com/alefesta/ermes/main/test.yaml && mv test.yaml action.yaml
          git add .
          git commit -m "generated"
          git push --set-upstream origin ${{github.actor}}

      - name: Sync Changes
        run: echo 'The triggering workflow passed at $BRANCH'
      - name: Sync
        uses: actions/checkout@v2
      - run: |
          git fetch
          git checkout $BRANCH
          git pull
  executor:
      needs: on-success
      uses: alefesta/ermes/.github/workflows/action.yaml@$branch_name
